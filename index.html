<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyuszi</title>
    <style>
        body{
            background-color: aquamarine;
        }
        #container{
            background-color: white;
            border: solid 1px black;
            width: 864px;
            margin: 0px auto;
            padding: 10px;
        }
        #repa,#ujra{
            background-color: white;
            border: solid 1px black;
        }
        #stat{
            text-align: center;
            margin-top: 10px;
        }
        #db{
            height: fit-content;
            margin: auto;
        }
    </style>
    <script>
        let r = 0;
        let tomb = []
        let html = "";
        function start(){
            r = 0;
            document.getElementById("db").innerHTML = r+" darab";
            html = "";
            document.getElementById("container").innerHTML = html;
            for (let i = 0; i < 9; i++){ tomb[i] = []; for (let j = 0; j < 12; j++){
                    html += "<img onclick='katt("+i+","+j+")' id='"+i+"x"+j+"' onmouseleave='leave("+i+","+j+")' onmouseover='over("+i+","+j+")' src='repa.png'>"
                    tomb[i][j] = "R";
                }
            }
            document.getElementById("container").innerHTML = html;
            let ii = Math.floor(Math.random()*9); let jj = Math.floor(Math.random()*12);
            tomb[ii][jj] = "N";
            document.getElementById(ii+"x"+jj).src = "nyuszi.png";
            for (let k = 0; k < 20; k++){
            do{
                ii = Math.floor(Math.random()*9);
                jj = Math.floor(Math.random()*12);
            }while (tomb[ii][jj] != "R");
            document.getElementById(ii+"x"+jj).src = "kutya.png";
            tomb[ii][jj] = "K";
        }
        }

        function leave(i, j){
            document.getElementById(i+"x"+j).setAttribute("style", "background-color: white");
        }

        function over(i, j){
            document.getElementById(i+"x"+j).setAttribute("style", "background-color: #99ccff");
        }

        function katt(i,j){
            if (tomb[i][j] == "R"){
                if (i < 8){
                if (tomb[i+1][j] == "N"){
                    tomb[i][j] = "N";
                    document.getElementById(i+"x"+j).src = "nyuszi.png";
                    tomb[i+1][j] = "U";
                    document.getElementById((i+1)+"x"+j).src = "ures.png";
                    r++;
                    document.getElementById("db").innerHTML = r+" darab";
                    if (r == (9*12)-21){
                alert("Győztél!");
            }
                    return
                }
            }
            if (i > 0){
                if (tomb[i-1][j] == "N"){
                    tomb[i][j] = "N";
                    document.getElementById(i+"x"+j).src = "nyuszi.png";
                    tomb[i-1][j] = "U";
                    document.getElementById((i-1)+"x"+j).src = "ures.png";
                    r++;
                    document.getElementById("db").innerHTML = r+" darab";
                    if (r == (9*12)-21){
                alert("Győztél!");
            }
                    return
                }
            }
            if (j < 11){
                if (tomb[i][j+1] == "N"){
                    tomb[i][j] = "N";
                    document.getElementById(i+"x"+j).src = "nyuszi.png";
                    tomb[i][j+1] = "U";
                    document.getElementById(i+"x"+(j+1)).src = "ures.png";
                    r++;
                    document.getElementById("db").innerHTML = r+" darab";
                    if (r == (9*12)-21){
                alert("Győztél!");
            }
                    return
                }
            }
            if (j > 0){
                if (tomb[i][j-1] == "N"){
                    tomb[i][j] = "N";
                    document.getElementById(i+"x"+j).src = "nyuszi.png";
                    tomb[i][j-1] = "U";
                    document.getElementById(i+"x"+(j-1)).src = "ures.png";
                    r++;
                    document.getElementById("db").innerHTML = r+" darab";
                    if (r == (9*12)-21){
                alert("Győztél!");
            }
                    return
                }
            }
            }
            if (tomb[i][j] == "U"){
                tomb[i][j] = "R";
                    document.getElementById(i+"x"+j).src = "repa.png";
                r--;
                document.getElementById("db").innerHTML = r+" darab";
            }
        }
    </script>
</head>
<body onload="start();">
    <div id="container">

    </div>
    <div id="stat"> 
        <img id="repa" src="repa.png">
        <span id="db">0 darab</span>
        <img onclick="start();" id="ujra" src="ujra.png">
    </div>
</body>
</html>